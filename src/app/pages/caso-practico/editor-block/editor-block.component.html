<div *ngFor="let block of blocks; let i = index" style="margin-bottom: 1rem;">
  <ng-container *ngIf="block.type === 'paragraph'">
    <mat-form-field style="width: 100%;" appearance="outline">
      <mat-label>Párrafo {{ i + 1 }}</mat-label>
      <textarea
        matInput
        [(ngModel)]="block.data.content"
        (ngModelChange)="updateBlock(i, $event)">
      </textarea>
    </mat-form-field>

    <div style="display: flex; gap: 0.5rem; align-items: center;">
      <button mat-stroked-button color="warn" (click)="removeBlock(i)">Eliminar</button>

      <button mat-icon-button (click)="emitirRevisionAsva(i)" [disabled]="loading" matTooltip="Revisión ASWA">
        <img [src]="asvaImg" alt="ASWA" width="32" height="32" />
      </button>

      <button mat-icon-button color="primary" (click)="desarrollarConIA(i)" matTooltip="Desarrollar con IA">
        <mat-icon>settings</mat-icon>
      </button>
    </div>
  </ng-container>
</div>

<button mat-raised-button color="primary" (click)="addParagraph()">Agregar párrafo</button>
